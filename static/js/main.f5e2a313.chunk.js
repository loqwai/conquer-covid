(this["webpackJsonpconquer-covid"]=this["webpackJsonpconquer-covid"]||[]).push([[0],{30:function(e,t,n){e.exports=n(44)},35:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(26),r=n.n(a),c=(n(35),n(7)),s=n(27),u=n(29),l=(n(38),function(e){var t=i.a.useState((function(){return e})),n=Object(c.a)(t,1)[0];i.a.useEffect((function(){var e=!1;return requestAnimationFrame((function t(){e||(n(),requestAnimationFrame(t))})),function(){e=!0}}),[n])}),h=n(46),d=(n(39),function(e){var t=e.person;return i.a.createElement(i.a.Fragment,null,i.a.createElement("text",{className:"person-shape-face",x:t.position.x-5,y:t.position.y+5},t.infected?"\ud83e\udd2e":"\ud83d\ude42"),i.a.createElement("text",{className:"person-shape-name",x:t.position.x-5,y:t.position.y+10,lengthAdjust:"spacingAndGlyphs",textLength:"10"},t.name))}),m=function(e){var t=e.row,n=e.column,o=e.population,a=e.size;if(!o)return null;var r=(400-a.width)/2,c=(400-a.height)/2;return i.a.createElement("g",{style:{transform:"translate(".concat(400*n,"px, ").concat(400*t,"px)")}},i.a.createElement("rect",{width:400,height:400,fill:"transparent",stroke:"#cccccc"}),i.a.createElement("g",{style:{transform:"translate(".concat(r,"px, ").concat(c,"px)")}},i.a.createElement("rect",{width:a.width,height:a.height,fill:"transparent",stroke:"black"}),h.a(o).map((function(e){return i.a.createElement(d,{key:e.id,person:e})}))))},f=function(e){var t=e.columnCount,n=e.rooms,o=i.a.useState(null===n||void 0===n?void 0:n.map((function(e){return e.toData()}))),a=Object(c.a)(o,2),r=a[0],s=a[1];return l((function(){s(null===n||void 0===n?void 0:n.map((function(e){return e.toData()})))})),i.a.createElement(i.a.Fragment,null,null===r||void 0===r?void 0:r.map((function(e,n){return i.a.createElement(m,Object.assign({key:n},e,{row:Math.floor(n/t),column:n%t}))})))},p=n(16),v=n(28),g=n(49),w=n(54),E=n(50),x=n(52),b=n(17),y=n(51),C=n(47),P=n(48),S=n(53),k=n(5),B=new b.Chance,O=function(){return{infected:!1,id:Object(S.a)(),position:{x:0,y:0},name:B.name()}},j=function e(t,n){var o=this;Object(p.a)(this,e),this.population=void 0,this.size=void 0,this.engine=void 0,this.addPerson=function(e){var t=o.population,n=o.engine,i=o.size;t[e.id]=e;var a=k.Bodies.circle(B.integer({min:0,max:i.width}),B.integer({min:0,max:i.width}),5,{label:e.id});k.World.add(n.world,a)},this.removePerson=function(e){var t=o.population,n=o.engine;delete t[e];var i=y.a(C.a("label",e),n.world.bodies);i&&k.World.remove(n.world,i)},this.getPeople=function(){return h.a(o.population)},this.start=function(){var e=o.engine,t=o.population;k.Engine.run(e),k.Events.on(e,"afterUpdate",(function(){o.syncPopulationPosition()})),k.Events.on(e,"collisionStart",(function(e){e.pairs.forEach((function(e){var n=e.bodyA,o=e.bodyB,i=t[n.label],a=t[o.label];a&&i&&(i.infected=a.infected=i.infected||a.infected)}))}))},this.introduceEntropy=function(){var e=o.engine,t=o.size,n=B.pickone(e.world.bodies);n&&(n.isStatic||k.Body.applyForce(n,{x:B.integer({min:0,max:t.width}),y:B.integer({min:0,max:t.height})},{x:B.floating({min:-1e-4,max:1e-4}),y:B.floating({min:-1e-4,max:1e-4})}))},this.toData=function(){return{population:o.population,size:o.size}},this.syncPopulationPosition=function(){var e=o.engine,t=o.population;P.a((function(e){if(e.label){var n=t[e.label];n&&(n.position=e.position)}}),e.world.bodies)},this.setupEngine=function(){var e=o.size,t=k.Engine.create();return t.world.gravity.y=0,k.World.add(t.world,[k.Bodies.rectangle(e.width/2,-500,e.width,1e3,{isStatic:!0}),k.Bodies.rectangle(e.width+500,e.height/2,1e3,e.height,{isStatic:!0}),k.Bodies.rectangle(e.width/2,e.height+500,e.width,1e3,{isStatic:!0}),k.Bodies.rectangle(-500,e.height/2,1e3,e.height,{isStatic:!0})]),t},this.size=n,this.engine=this.setupEngine(),this.population={},P.a(this.addPerson,t),this.start(),t.forEach(this.addPerson)},M=new b.Chance,z=function(){function e(){var t=this;Object(p.a)(this,e),this.rooms=void 0,this.time=0,this.deltaSinceLastMove=0,this.moveOneRandomPerson=function(){var e=M.pickone(t.rooms),n=M.pickone(t.rooms);if(!x.a(e.getPeople())){var o=M.pickone(e.getPeople());e.removePerson(o.id),n.addPerson(o)}},this.wiggleThePeople=function(){t.rooms.forEach((function(e){return e.introduceEntropy()}))},this.rooms=function(){var e=g.a(O,z.popCount);M.pickone(e).infected=!0;var t=w.a(z.popCount/z.roomCount,e);return E.a((function(e){var t=M.integer({min:100,max:z.maxBigness});return new j(e,{height:t,width:t})}),t)}()}return Object(v.a)(e,[{key:"step",value:function(e){this.deltaSinceLastMove+=e,this.deltaSinceLastMove<100||(this.moveOneRandomPerson(),this.wiggleThePeople(),this.deltaSinceLastMove=0)}}]),e}();z.popCount=90,z.roomCount=9,z.columnCount=Math.floor(Math.sqrt(z.roomCount)),z.rowCount=Math.floor(z.roomCount/z.columnCount),z.maxBigness=400;var A=function(){var e=i.a.useState(0),t=Object(c.a)(e,2),n=t[0],o=t[1],a=i.a.useState(0),r=Object(c.a)(a,2),l=r[0],h=r[1],d=i.a.useState(void 0),m=Object(c.a)(d,2),p=m[0],v=m[1],g=i.a.useRef(0),w=i.a.useRef(0);return i.a.useEffect((function(){v(new z)}),[]),i.a.useEffect((function(){return g.current=requestAnimationFrame((function e(t){var n=t-w.current;w.current=t,h(n),o((function(e){return e+1})),g.current=requestAnimationFrame(e)})),function(){return cancelAnimationFrame(g.current)}}),[]),i.a.useEffect((function(){n%10===0&&(null===p||void 0===p||p.step(l))}),[p,n,l]),i.a.createElement("div",{className:"app"},i.a.createElement(s.a,null,(function(e){var t=e.width,n=e.height;return t&&n&&i.a.createElement(u.a,{width:t,height:n,tool:"pan",customToolbar:function(){return null},customMiniature:function(){return null}},i.a.createElement("svg",{className:"world",viewBox:"0 0 ".concat(z.columnCount*z.maxBigness," ").concat(z.rowCount*z.maxBigness)},i.a.createElement(f,{columnCount:z.columnCount,rooms:null===p||void 0===p?void 0:p.rooms})))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.f5e2a313.chunk.js.map