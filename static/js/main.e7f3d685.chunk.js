(this["webpackJsonpconquer-covid"]=this["webpackJsonpconquer-covid"]||[]).push([[0],{26:function(e,n,t){e.exports=t(39)},31:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var i=t(2),o=t.n(i),a=t(22),r=t.n(a),c=(t(31),t(18)),s=t(44),u=t(49),l=t(45),d=t(47),h=t(11),f=t(23),p=(t(37),t(24)),m=t(46),g=t(41),v=t(42),w=t(43),E=t(48),x=t(4),y=new h.Chance,b=function(){return{infected:!1,id:Object(E.a)(),position:{x:0,y:0},name:y.name()}},P=function e(n,t){var i=this;Object(p.a)(this,e),this.population=void 0,this.size=void 0,this.engine=void 0,this.addPerson=function(e){var n=i.population,t=i.engine,o=i.size;n[e.id]=e;var a=x.Bodies.circle(y.integer({min:0,max:o.width}),y.integer({min:0,max:o.width}),5,{label:e.id});x.World.add(t.world,a)},this.removePerson=function(e){var n=i.population,t=i.engine;delete n[e];var o=m.a(g.a("label",e),t.world.bodies);o&&x.World.remove(t.world,o)},this.getPeople=function(){return v.a(i.population)},this.start=function(){var e=i.engine,n=i.population;x.Engine.run(e),x.Events.on(e,"afterUpdate",(function(){i.syncPopulationPosition()})),x.Events.on(e,"collisionStart",(function(e){e.pairs.forEach((function(e){var t=e.bodyA,i=e.bodyB,o=n[t.label],a=n[i.label];a&&o&&(o.infected=a.infected=o.infected||a.infected)}))}))},this.introduceEntropy=function(){var e=i.engine,n=i.size,t=y.pickone(e.world.bodies);t&&(t.isStatic||x.Body.applyForce(t,{x:y.integer({min:0,max:n.width}),y:y.integer({min:0,max:n.height})},{x:y.floating({min:-1e-4,max:1e-4}),y:y.floating({min:-1e-4,max:1e-4})}))},this.syncPopulationPosition=function(){var e=i.engine,n=i.population;w.a((function(e){if(e.label){var t=n[e.label];t&&(t.position=e.position)}}),e.world.bodies)},this.setupEngine=function(){var e=i.size,n=x.Engine.create();return n.world.gravity.y=0,x.World.add(n.world,[x.Bodies.rectangle(e.width/2,-500,e.width,1e3,{isStatic:!0}),x.Bodies.rectangle(e.width+500,e.height/2,1e3,e.height,{isStatic:!0}),x.Bodies.rectangle(e.width/2,e.height+500,e.width,1e3,{isStatic:!0}),x.Bodies.rectangle(-500,e.height/2,1e3,e.height,{isStatic:!0})]),n},this.size=t,this.engine=this.setupEngine(),this.population={},w.a(this.addPerson,n),this.start(),n.forEach(this.addPerson)},k=t(25),B=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o.a.useEffect((function(){if(e){var t=setInterval(e,n);return function(){return clearInterval(t)}}}),[e,n].concat(Object(k.a)(t)))},S=(t(38),function(e){var n=e.person;return o.a.createElement(o.a.Fragment,null,o.a.createElement("text",{className:"person-shape-face",x:n.position.x-5,y:n.position.y+5},n.infected?"\ud83e\udd2e":"\ud83d\ude42"),o.a.createElement("text",{className:"person-shape-name",x:n.position.x-5,y:n.position.y+10,lengthAdjust:"spacingAndGlyphs",textLength:"10"},n.name))}),j=function(e){var n=e.population,t=e.size,i=o.a.useState(0)[1];return o.a.useEffect((function(){var e=!1;return requestAnimationFrame((function n(){e||(i((function(e){return e+1})),requestAnimationFrame(n))})),function(){e=!0}}),[i]),n?o.a.createElement("svg",{viewBox:"0 0 ".concat(t.width," ").concat(t.height),style:t},v.a(n).map((function(e){return o.a.createElement(S,{key:e.id,person:e})}))):null},z=function(e){var n=e.rooms;return o.a.createElement("div",{className:"World"},n.map((function(e,n){return o.a.createElement(j,Object.assign({key:n},e))})))},O=new h.Chance,W=f,A=function(){var e=o.a.useState(W().unix()),n=Object(c.a)(e,2),t=n[0],i=n[1],a=o.a.useState([]),r=Object(c.a)(a,2),h=r[0],f=r[1];return o.a.useEffect((function(){var e=s.a(b,100);O.pickone(e).infected=!0;var n=u.a(5,e),t=l.a((function(e){var n=O.integer({min:100,max:400});return new P(e,{height:n,width:n})}),n);f(t)}),[]),B((function(){i(W.unix(t).add(10,"minutes").unix())}),1e3),B((function(){var e=O.pickone(h),n=O.pickone(h);if(!d.a(e.getPeople())){var t=O.pickone(e.getPeople());e.removePerson(t.id),n.addPerson(t),h.forEach((function(e){return e.introduceEntropy()}))}}),100),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,W.unix(t).format()),o.a.createElement(z,{rooms:h}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.e7f3d685.chunk.js.map